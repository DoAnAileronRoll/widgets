(function() {
	let template = document.createElement("template");
	template.innerHTML = `
<head>
</head>
<body id="ASA12312SASDCX">

<div id="P_EB920A842A84F4B96E69440DC13301B7" data-sap-ui="P_EB920A842A84F4B96E69440DC13301B7" class="sapAppBuildingStoryContainer"><div id="__jsview39" data-sap-ui="__jsview39" class="sapUiView sapUiJSView sapEpmStoryView viewMode improvedConsumptionMode" style="width: 100%;"><div id="__jsview39-contentWrapper" data-sap-ui="__jsview39-contentWrapper" class="sapMFlexBox sapMHBox sapMFlexBoxJustifyStart sapMFlexBoxAlignItemsStretch sapMFlexBoxWrapNoWrap sapMFlexBoxAlignContentStretch sapMFlexBoxBGTransparent" style="height: 100%; width: 100%;"><div id="__jsview39-contentLayout" data-sap-ui="__jsview39-contentLayout" class="sapUiVlt sapuiVlt sapEpmDashboardStoryVerticalLayout sapMFlexItemAlignAuto sapMFlexBoxBGTransparent sapMFlexItem" style="width: 100%; order: 0; flex: 1 0 auto; min-height: auto; min-width: auto;"><div class="sapUiVltCell sapuiVltCell"><div id="__splitter30" data-sap-ui="__splitter30" class="sapEPMUISplitter sapEPMUISplitterFixed sapFpaUiStoryComposerLayout" style="width: 100%; height: 100%;"><div class="sapEPMUISplitterRHLeft sapEPMUISplitterResizable __splitter30_sapEPMUISplitterRHLeft" style="right: 0px;"><div id="__layout390" data-sap-ui="__layout390" class="sapUiVlt sapuiVlt sapLumiraStoryComposerRightContent sapFpaUiComposerContentCommentModeOverlay" style="width: 100%;"><div class="sapUiVltCell sapuiVltCell"><div data-sap-ui-fastnavgroup="true" class="sapFpaUiStoryControlsFilterBarContainer" id="__container190" data-sap-ui="__container190" style="height: 0px; display: none; width: 100%;"><div class="sapEPMUIFilterBar sapEPMUIFilterBarWithExpandableLeftItems" id="__bar19" data-sap-ui="__bar19"><div class="sapEpmUiTabContainerLeftToolbar"><div class="sapEpmModelerToolbarLeftItems"><div id="__box140" data-sap-ui="__box140" class="sapMFlexBox sapMHBox sapMFlexBoxJustifyStart sapMFlexBoxAlignItemsStretch sapMFlexBoxWrapNoWrap sapMFlexBoxAlignContentStretch sapMFlexBoxBGTransparent"><div id="__data1018" class="sapMFlexItemAlignAuto sapMFlexBoxBGTransparent sapMFlexItem" style="order: 0; flex: 0 1 auto; min-height: auto; min-width: auto;"><div id="__item2011" data-sap-ui="__item2011" title="Add Story Filter" class="sapEpmModelerToolbarItem sapEpmModelerToolbarElement sapEpmModelerToolbarItemClickable sapEPMUIAddFilterBtnIcon sapEPMUIAddFilterBtnIcon-hidden"><span class="sapEpmModelerToolbarItemIcon"><span id="__icon3470" data-sap-ui="__icon3470" role="presentation" aria-hidden="true" aria-label="new-filter" data-sap-ui-icon-content="" class="sapUiIcon sapUiIconMirrorInRTL" style="font-family: fpa-icons;"></span></span></div></div><div id="__data1019" class="sapMFlexItemAlignAuto sapMFlexBoxBGTransparent sapMFlexItem" style="order: 0; flex: 0 1 auto; min-height: auto; min-width: auto;"><div id="__item2012" data-sap-ui="__item2012" title="Add Story Filter/Prompt" class="sapEpmModelerToolbarItem sapEpmModelerToolbarElement sapEpmModelerToolbarItemClickable sapEPMUIAddFilterBtnIcon"><span class="sapEpmModelerToolbarItemIcon"><span id="__icon3471" data-sap-ui="__icon3471" role="presentation" aria-hidden="true" aria-label="new-filter" data-sap-ui-icon-content="" class="sapUiIcon sapUiIconMirrorInRTL" style="font-family: fpa-icons;"></span></span></div></div></div></div></div><div class="sapEpmUIFilterPagination"><span id="__icon3472" data-sap-ui="__icon3472" role="presentation" aria-hidden="true" aria-label="previous" data-sap-ui-icon-content="" class="sapUiIcon sapUiIconMirrorInRTL sapEpmUIFilterPaginationIcon sapEpmModellerUiLeftIcon disable" style="font-family: fpa-icons;"></span><span id="__icon3473" data-sap-ui="__icon3473" role="presentation" aria-hidden="true" aria-label="next" data-sap-ui-icon-content="" class="sapUiIcon sapUiIconMirrorInRTL sapEpmUIFilterPaginationIcon sapEpmModellerUiRightIcon disable" style="font-family: fpa-icons;"></span></div></div></div></div><div class="sapUiVltCell sapuiVltCell"><div class="sapFpaUiStoryControlsDisplayContainer" id="__container192" data-sap-ui="__container192"><div id="__layout388" data-sap-ui="__layout388" class="sapEpmStoryMessageLayoutContainer" style="display: none;"><div id="__layout389" data-sap-ui="__layout389" class="sapUiVlt sapuiVlt sapEpmStoryMessageVerticalLayout"><div class="sapUiVltCell sapuiVltCell"><span id="__icon3483" data-sap-ui="__icon3483" class="sapUiIcon messageLayoutIcon"></span></div><div class="sapUiVltCell sapuiVltCell"><span id="__view16" data-sap-ui="__view16" tabindex="-1" aria-invalid="false" aria-disabled="false" class="sapUiTv sapUiTvAlignLeft messageLayoutText" style="direction: inherit;"></span></div></div></div><div id="__content15" data-sap-ui="__content15" class="sapFpaUiTransitionPageDisplayContainer" style="display: none;"></div><div id="__story28" data-sap-ui="__story28" class="sapEpmDashboardStory"><div class="sapEpmStoryComposer" id="__story29" data-sap-ui="__story29"><div class="sapEpmComposerContainer" id="__container189" data-sap-ui="__container189" style="height: 100%;"><div id="__container188" data-sap-ui="__container188" class="sapUiComponentContainer" style="width: 100%; height: 100%;"><div id="__container188-uiarea" style="width: 100%; height: 100%;"><div id="storyContainer___component15" data-sap-ui="storyContainer___component15" class="sapUiView sapUiJSView sapUiViewDisplayBlock" style="width: 100%; height: 100%;"><div id="__panel1001" data-sap-ui="__panel1001" class="sapLumiraStoryLayoutUnifiedComponentPagePanel sapLumiraStoryLayoutCommonPagePanel sapLumiraStoryReusableLayoutScrollableContainer smoothScroll sapAppBuildingNoShadow presentation fitPageToDevice edit" style="overflow: hidden;"><div id="__actions939" data-sap-ui="__actions939"></div><div class="highlightBorder border-n"></div><div class="highlightBorder border-e"></div><div class="highlightBorder border-s"></div><div class="highlightBorder border-w"></div><div id="__panel1002" data-sap-ui="__panel1002" data-sap-ui-fastnavgroup="true" class="sapLumiraStoryLayoutUnifiedComponentEditPanel sapLumiraStoryLayoutCommonEditPanel sapLumiraStoryLayoutScrollableContainer sapLumiraStoryUnifiedLayouter" style="width: 1394px; height: 1237px; background-color: rgb(255, 255, 255); background-size: 0px; background-image: none;"><div id="highlightDropzone__panel1002" class="highlightDropzone"></div><div id="__panel1003" data-sap-ui="__panel1003" tabindex="-1" class="sapLumiraStoryLayoutUnifiedComponentSectionPanel sapLumiraStoryLayoutCommonSectionPanel selectedChild" style="width: 864px; height: 448px; top: 0px; left: 0px;"><div id="__panel1004" data-sap-ui="__panel1004" class="sapLumiraStoryLayoutUnifiedComponentWidgetPanel sapLumiraStoryLayoutCommonWidgetPanel sap-custom-default-table selected" data-sap-widget-id="fbff92e8-a8d7-4541-90a8-e735a410882b" style="height: 448px; width: 864px; left: 0px; top: 0px;"><div id="__panel1004-wrapper" class="sapLumiraStoryLayoutCommonWidgetWrapper supportWidgetBorderStyleForPdfExport hideOverflow" style="border: none;"><div id="__widget442" data-sap-ui="__widget442" data-sap-ui-fastnavgroup="true" class="sapFpaUiDynamicTableWidgetContainer sapLumiraStoryExtensionAbstractWidget sapLumiraStoryLayoutUnifiedComponentWidget sapLumiraStoryLayoutCommonWidget" style="width: 100%; height: 100%; pointer-events: auto;"><div id="__widget442-gridContainer" class="sapFpaUiDynamicTableWidgetContent" style="height: 100%; width: 100%;"><div id="__control65" data-sap-ui="__control65" x-ms-format-detection="none" tablestyle-id="__widget442-gridContainer" style="position: relative; width: 100%; height: 100%;"><div id="__table32" data-sap-ui="__table32" class="sapUiView sapUiJSView sapUiViewDisplayBlock sapFpaUiPaReportEngineTable" style="width: 100%; height: 100%;"><div class="textAreaReactTable" tabindex="-1"><textarea id="__table32-gridClipBoard" class="gridClipBoard textAreaReactTable" tabindex="-1"></textarea><textarea id="cellFormulaEditorForReact" class="textAreaReactTable" tabindex="-1"></textarea></div><div id="__div72" data-sap-ui="__div72"><div id="__overlay54" data-sap-ui="__overlay54" class="commentOverlay"></div></div><div id="__table32-reactTableContainer" class="reactTableComponent" style="width: 100%;"><div id="sacGridTableRoot__table32" tabindex="0" style="width: 100%; height: 100%; position: absolute; top: 0px; left: 0px;"><div class="titleWrapper dataRegionTitle" tabindex="-1" style="min-height: 52px; width: 100%; border-color: rgb(230, 231, 232);"><div class="border bottomBorder" style="position: absolute; box-sizing: border-box; left: 0px; width: calc(100% - 0px); bottom: 0px; border-bottom: 1px solid rgb(230, 231, 232);"></div><div id="sacGridTitle__table32" class="sapReportEngineTitle" tabindex="0" editable="false" style="font-size: 16px; line-height: 19px; color: rgb(88, 89, 91); fill: rgb(88, 89, 91); font-family: &quot;72-Web&quot;;">BAS DEMO DATA</div><div class="sapReportEngineTokenContainer"><div class="sapReportEngineCurrencyFilterToken sapReportEngineToken titleToken" style="width: 38px; height: 20px;"><span class="currencyToken sapReportEngineSubtitle" id="dataRegion_167580757340315-__table32-currencyToken" title="in USD" tabindex="0" style="font-size: 12px; line-height: 14px; color: rgb(88, 89, 91); fill: rgb(88, 89, 91); font-family: &quot;72-Web&quot;;">in USD</span></div><div class="sapReportEngineDatasetToken sapReportEngineToken" style="width: 29px; height: 20px;"><div class="sapReportEngineTokenSeparator"></div><span class="sapReportEngineDatasetIcon" id="dataRegion_167580757340315-__table32-datasetIcon" data-regionkey="dataRegion_167580757340315"></span></div></div><div class="titleEditor"></div><div class="titleResizer"></div><div class="titleResizeIndicator"><div class="resizeInfo"></div></div></div><div class="tableContainer table__table32 " style="height: 396px; width: 864px; overflow: hidden; visibility: visible;"><div style="width: 852px; height: 105px; box-sizing: border-box;"><div class="rowResizer" style="top: 100px;"></div><div class="rowResizeIndicator"><div class="resizeInfo"></div></div><div class="htmlTableWrapper " style="width: 852px; height: 105px; box-sizing: border-box;"><div class="freezeSectiontopLeft" style="position: absolute; top: 0px; left: 0px; width: calc(100% - 12px); height: calc(100% - 12px); box-sizing: border-box; overflow: hidden;"><div class="tableDivTable reactTable   titleVisible " style="padding-top: 0px; padding-bottom: 0px; width: 852px;"><div class="tableDivRow" style="height: 35px;"><div data-tablerow="0" data-tablecol="0" class="tableCell cell2d3e7f09d8 tableDivCell  headerCell colDimHeader  cellWithIcons" title="" tabindex="-1" editable="false" style="width: 428px; height: 35px; left: 0px;"><div class="cellValue" style="font-size: 13px; line-height: 16px; font-weight: bold; color: rgb(88, 89, 91); fill: rgb(88, 89, 91); font-family: &quot;72-Web&quot;; text-align: right; justify-content: flex-end; flex-wrap: wrap; height: 31px;"><span style="text-overflow: ellipsis; overflow: hidden;">Category</span></div><div class="colSelection"></div><div class="rowSelection"></div></div><div data-tablerow="0" data-tablecol="1" class="tableCell cell5665a8e9 tableDivCell  CategoryAC headerCell colDimMember dimensionMember   cellWithIcons" title="Actual" tabindex="-1" editable="false" style="background-color: transparent; width: 424px; height: 35px; left: 428px;"><div class="border bottomBorder" style="position: absolute; box-sizing: border-box; left: 4px; width: calc(100% - 8px); bottom: 0px; border: 1px solid rgb(63, 81, 97); height: 5px; background-color: rgb(63, 81, 97);"></div><div class="cellValue" style="font-size: 13px; line-height: 16px; color: rgb(88, 89, 91); fill: rgb(88, 89, 91); font-family: &quot;72-Web&quot;; text-align: right; justify-content: flex-end; flex-wrap: wrap; height: 31px;"><span style="text-overflow: ellipsis; overflow: hidden;">Actual</span></div><div class="colSelection"></div></div></div><div class="tableDivRow" style="height: 35px;"><div data-tablerow="1" data-tablecol="0" class="tableCell cell2d4ffc0357 tableDivCell  headerCell rowDimHeader  cellWithIcons" title="" tabindex="-1" editable="false" style="width: 428px; height: 35px; left: 0px;"><div class="border topBorder" style="position: absolute; box-sizing: border-box; left: 4px; width: calc(100% - 8px); top: 0px; border-top: 1px solid rgb(63, 81, 97);"></div><div class="cellValue" style="font-size: 13px; line-height: 16px; font-weight: bold; color: rgb(88, 89, 91); fill: rgb(88, 89, 91); font-family: &quot;72-Web&quot;; flex-wrap: wrap; height: 31px;"><span style="text-overflow: ellipsis; overflow: hidden;">Account</span></div><div class="rowSelection"></div></div><div data-tablerow="1" data-tablecol="1" class="tableCell cell44e8af6a tableDivCell  headerCell  cellWithIcons" title="" tabindex="-1" editable="false" style="width: 424px; height: 35px; left: 428px;"><div class="cellValue" style="font-size: 13px; line-height: 16px; color: rgb(88, 89, 91); fill: rgb(88, 89, 91); font-family: &quot;72-Web&quot;; flex-wrap: wrap; height: 31px;"><span style="text-overflow: ellipsis; overflow: hidden;"></span></div></div></div><div class="tableDivRow" style="height: 35px;"><div data-tablerow="2" data-tablecol="0" class="tableCell cell2d6178fcd6 tableDivCell  headerCell rowDimMember dimensionMember cellInHierarchy  showDrillIcon cellWithIcons" title="All Accounts" tabindex="-1" editable="false" style="background-color: transparent; width: 428px; height: 35px; left: 0px;"><div class="border bottomBorder" style="position: absolute; box-sizing: border-box; left: 4px; width: calc(100% - 8px); bottom: 0px; border-bottom: 1px solid rgb(204, 204, 204);"></div><div class="textOverflow cutOffContent showEllipsis" title="All Accounts" style="padding-left: 8px; padding-top: 2px; overflow: hidden; max-height: 31px; font-size: 13px; line-height: 16px; color: rgb(88, 89, 91); fill: rgb(88, 89, 91); font-family: &quot;72-Web&quot;;"><span class="icon hierarchyIcon collapsedIcon floatingIcon"></span><div class="showEllipsis">All Accounts</div></div><div class="rowSelection"></div></div><div data-tablerow="2" data-tablecol="1" class="tableCell cell336bb5eb tableDivCell  dataCell" title="76,698,449.84" tabindex="-1" editable="true" style="font-size: 13px; line-height: 16px; color: rgb(88, 89, 91); fill: rgb(88, 89, 91); font-family: &quot;72-Web&quot;; width: 424px; height: 35px; left: 428px; background-color: transparent;"><div class="border bottomBorder" style="position: absolute; box-sizing: border-box; left: 4px; width: calc(100% - 8px); bottom: 0px; border-bottom: 1px solid rgb(204, 204, 204);"></div><span class="cellValue showEllipsis">76,698,449.84</span></div></div></div><div class="reactTableOverlay" style="pointer-events: none; position: absolute; top: 0px; left: 0px;"><div><div class="overlayBorder" style="border-color: rgb(59, 111, 154); border-width: 1px; box-sizing: border-box; position: absolute; top: 70px; left: 428px; width: 424px; height: 35px; border-style: solid;"><div class="selectionDragger" style="background-color: rgb(59, 111, 154);"></div></div></div></div><div style="position: absolute; top: 0px; left: 0px; width: 1px; height: 105px; pointer-events: none;"></div></div></div></div><div class="loadingArea loadingAreaHorizontal top" style="top: 0px; width: calc(100% - 0px); height: 20px; right: 0px;"><div class="loadingIndicatorGif" style="background: url(&quot;https://assets.sapanalytics.cloud/production/uiAssets-2023.2.3/uiAssets/img/loadingIndicator_compressed.abd81332af396dfaf59fdc799a89f429.gif&quot;) center center / 30px 12px no-repeat; bottom: 0px; left: calc(50% - 20px);"></div></div><div class="loadingArea loadingAreaVertical left" style="left: 0px; width: 20px; height: calc(100% - 0px); bottom: 0px;"><div class="loadingIndicatorGif" style="background: url(&quot;https://assets.sapanalytics.cloud/production/uiAssets-2023.2.3/uiAssets/img/loadingIndicator_compressed.abd81332af396dfaf59fdc799a89f429.gif&quot;) center center / 30px 12px no-repeat; bottom: calc(50% - 20px); transform: rotate(90deg); right: -10px;"></div></div><div class="loadingArea loadingAreaHorizontal bottom" style="bottom: 0px; width: calc(100% - 0px); height: 30px; right: 0px;"><div class="loadingIndicatorGif" style="background: url(&quot;https://assets.sapanalytics.cloud/production/uiAssets-2023.2.3/uiAssets/img/loadingIndicator_compressed.abd81332af396dfaf59fdc799a89f429.gif&quot;) center center / 30px 12px no-repeat; bottom: 10px; left: calc(50% - 20px);"></div></div><div class="loadingArea loadingAreaVertical right" style="right: 0px; width: 30px; height: calc(100% - 0px); bottom: 0px;"><div class="loadingIndicatorGif" style="background: url(&quot;https://assets.sapanalytics.cloud/production/uiAssets-2023.2.3/uiAssets/img/loadingIndicator_compressed.abd81332af396dfaf59fdc799a89f429.gif&quot;) center center / 30px 12px no-repeat; bottom: calc(50% - 20px); transform: rotate(90deg); right: 2px;"></div></div></div></div></div></div><div id="__layout393" data-sap-ui="__layout393" class="sapUiHLayout sapUiHLayoutNoWrap sapEpmUiFieldButtonContainer row-panel"><div class="sapUiHLayoutChildWrapper"><div id="__button1419" data-sap-ui="__button1419" class="sapEpmUiFieldButton enabled add-row custom-row-col-button" title="Add a new row"><span id="__icon3587" data-sap-ui="__icon3587" role="presentation" aria-hidden="true" data-sap-ui-icon-content="" class="sapUiIcon sapUiIconMirrorInRTL" style="font-family: SAP-icons;"></span></div></div><div class="sapUiHLayoutChildWrapper"><div id="__button1420" data-sap-ui="__button1420" class="sapEpmUiFieldButton disabled rem-row custom-row-col-button" title="Delete a row"><span id="__icon3588" data-sap-ui="__icon3588" role="presentation" aria-hidden="true" data-sap-ui-icon-content="" class="sapUiIcon sapUiIconMirrorInRTL" style="font-family: SAP-icons;"></span></div></div></div><div id="__layout392" data-sap-ui="__layout392" class="sapUiVlt sapuiVlt sapEpmUiFieldButtonContainer col-panel"><div class="sapUiVltCell sapuiVltCell"><div id="__button1417" data-sap-ui="__button1417" class="sapEpmUiFieldButton enabled add-col custom-row-col-button" title="Add a new column"><span id="__icon3589" data-sap-ui="__icon3589" role="presentation" aria-hidden="true" data-sap-ui-icon-content="" class="sapUiIcon sapUiIconMirrorInRTL" style="font-family: SAP-icons;"></span></div></div><div class="sapUiVltCell sapuiVltCell"><div id="__button1418" data-sap-ui="__button1418" class="sapEpmUiFieldButton disabled rem-col custom-row-col-button" title="Delete a column"><span id="__icon3590" data-sap-ui="__icon3590" role="presentation" aria-hidden="true" data-sap-ui-icon-content="" class="sapUiIcon sapUiIconMirrorInRTL" style="font-family: SAP-icons;"></span></div></div></div></div></div></div></div><div id="__actions941" data-sap-ui="__actions941"></div></div><div id="__actions940" data-sap-ui="__actions940" class="sapEpmStoryQuickActions verticalLayout stayOpen" style="right: -45px; height: 40px; width: 40px; transform-origin: left top; transform: scale(1);"><div class="sapEpmStoryQuickActionsInner sapEpmStoryQuickActionsInner-circle"><div id="__button1435" data-sap-ui="__button1435" tabindex="0" class="sapEpmStoryQuickActionsButton sapEpmUiPageTipEnabled sapFpaStory-quickActions-moreActions" style="cursor: pointer;"><div id="__button1435" data-sap-ui="__button1435" class="sapEpmUiIcon"><span id="__icon3594" data-sap-ui="__icon3594" role="presentation" aria-hidden="true" aria-label="More Actions" data-sap-ui-icon-content="" class="sapUiIcon sapUiIconMirrorInRTL" style="font-family: fpa-icons; font-size: 40px;"><span title="More Actions" aria-hidden="true" class="sapUiIconTitle"></span></span></div></div></div></div></div></div></div></div></div></div></div></div></div></div></div></div></div><div class="sapEPMUISplitterRHRight sapEPMUISplitterResizable __splitter30_sapEPMUISplitterRHRight" style="width: 0%;"><div id="__panel998" data-sap-ui="__panel998" class="sapEpmStoryComposerPanel objectListAnchor" style="width: 100%; height: 100%;"></div></div></div></div></div></div></div></div>
</body>
`;


	class Tools extends HTMLElement {
		constructor() {
			super();
			let shadowRoot = this.attachShadow({
				mode: "open"
			});
			shadowRoot.appendChild(template.content.cloneNode(true));

			this._props = {};
			var _selectedItem;
			var _oldSelectedItem = "";

		}

		postMessage(url, body, csrf) {
			var xhr = new XMLHttpRequest();
			xhr.withCredentials = true;

			xhr.open("POST",window.origin + url,false);

            if (csrf)
            {
                xhr.setRequestHeader("X-CSRF-Token", csrf);                
            }

            xhr.setRequestHeader("Content-Type", "text/plain");
			xhr.send(body);

            const obj = JSON.parse(xhr.responseText);
            var rtn = [];
            //document.getElementById("demo").innerHTML = obj.Data.header.findIndex((x) => x === "ID");
            for (let i = 0; i < obj.Data.member.length; i++) 
            {
                rtn.push(obj.Data.member[i][obj.Data.header.findIndex((x) => x === "ID")]);
            }

			return rtn.join("|");

            }	  

        getCSRFToken()
        {
			var xhr = new XMLHttpRequest();
			xhr.withCredentials = true;

            xhr.open("GET", window.origin + "/sap/fpa/services/rest/epm/session?action=logon",false);
            xhr.setRequestHeader("X-CSRF-Token", "Fetch");
            xhr.send();                
            return xhr.getResponseHeader("x-csrf-token");           
        }

		onCustomWidgetBeforeUpdate(changedProperties) {
			this._props = {
				...this._props,
				...changedProperties
			};
		}
		onCustomWidgetAfterUpdate(changedProperties) {

		}
	}
	customElements.define("com-cbeyondata-tools", Tools);
})();
